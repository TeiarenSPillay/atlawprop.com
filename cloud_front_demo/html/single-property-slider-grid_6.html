
{% load new_development_helpers humanize property_cart image_tags %}
<a href="{{ listing.get_absolute_url }}" class="home-featured-property content-block border-box grid_6 first last">
  <div class="property-image-thumb">
    {% if listing.featured %}<div class="transparent-red top-left">
      FEATURED
    </div>{% endif %}
    {% if listing.is_new or listing.is_sold or listing.is_rented %}
        {% if listing.featured %}RENTED{% endif %}
      <div class="transparent-black top-left">
        {% if listing.is_new %}NEW{% endif %}
        {% if listing.is_sold %}SOLD{% endif %}
        {% if listing.is_rented %}RENTED{% endif %}
      </div>
    {% endif %}
    <div class="centered">
      <img src="{% if listing.imagegallery_set.values.0.image %}{% get_image_url 'listings' 640 480 listing.imagegallery_set.values.0.image %}{% else %}/static/img/property-search/results/no-img.png{% endif %}" />
    </div>
    <div class="transparent-black bottom">
      {% if listing.on_show or listing.bank_reposessed or listing.distressed or listing.sole_mandate or listing.quick_sell_options or listing.public_tender or show_private_seller_icon or listing.student_accommodation %}
      <div class="tags">
      {% if listing.on_show %}<span class="listing-tag on-show-tag">ON SHOW</span>{% endif %}
      {% if listing.bank_reposessed %}<span class="listing-tag bank-repo-tag">BANK REPO</span>{% endif %}
      {% if listing.distressed %}<span class="listing-tag distressed-tag">DISTRESSED</span>{% endif %}
      {% if listing.sole_mandate %}<span class="listing-tag sole-mandate-tag">SOLE MANDATE</span>{% endif %}
      {% if listing.quick_sell_options %}<span class="listing-tag fnb-quicksell-tag">FNB QUICKSELL</span>{% endif %}
      {% if listing.public_tender %}<span class="listing-tag tender-tag">TENDER</span>{% endif %}
      {% if listing.show_private_seller_icon %}<span class="listing-tag private-sale-tag">PRIVATE SALE</span>{% endif %}
      {% if listing.student_accommodation %}<span class="listing-tag student-accommodation-tag">STUDENT ACCOMMODATION</span>{% endif %}
      {% if listing.enable_offers %}<span class="listing-tag accepting-offers-tag">ACCEPTING OFFERS</span>{% endif %}
      </div>
      {% endif %}
      <div class="clear"></div>
      <div class="icons {% if listing.on_show or listing.bank_reposessed or listing.distressed or listing.sole_mandate or listing.quick_sell_options or listing.public_tender or show_private_seller_icon or listing.student_accommodation %}bordered{% endif %}">
        {% if listing.get_photo_count == 1 %}<i class="icon-photos"></i><span>{{listing.get_photo_count}} Photo</span>{% elif listing.get_photo_count > 1%}<i class="icon-photos"></i><span>{{listing.get_photo_count}} Photos</span>{% endif %}
        {% if listing.map_x_position and listing.map_y_position %}<i class="icon-mapped"></i><span>Mapped</span>{% endif %}
        {% if listing.floorplangallery.count > 0 %}<i class="icon-floorplan"></i><span>Plans</span>{% endif %}
        {% if listing.video_id %}<i class="icon-video"></i><span>Video</span>{% endif %}
      </div>
    </div>
  </div>
  <div class="property-description margin-top15">
    <h3 class="property-price-heading headings">{% if not listing.get_main_type == 'NewDevelopment' %}{{ listing.render_price|safe }}{% else %}{{ listing.development_name }}{% endif %}</h3>
    <h4 class="property-marketing-heading clearfix sub-headings margin-bottom0">{{ listing.get_heading }}</h4>
  </div>
</a>
{% comment %}
// This goes in index.html
<div class="container_12 margin-top30 margin-bottom30">
  <div class="grid_6">
    <h3 class="slider-heading">Commercial</h3>
    <!-- If you need circles instead of lines, add the class "circle-nav" to featured-articles-1 -->
    <div class="featured-properties-1">
      <div class="slider">
      {% for listing in featured %}
        {% include "includes/single-property-slider-grid_6.html" %}
      {% endfor %}
      </div>
      <div class="slider-navigation">
      </div>
    </div>
  </div>
  <div class="grid_6">
    <h3 class="slider-heading">Residential</h3>
    <!-- If you need circles instead of lines, add the class "circle-nav" to featured-articles-1 -->
    <div class="featured-properties-1">
      <div class="slider">
      {% for listing in featured %}
        {% include "includes/single-property-slider-grid_6.html" %}
      {% endfor %}
      </div>
      <div class="slider-navigation">
      </div>
    </div>
  </div>
</div>

// This goes in block footer-js in index.html
<script type="text/javascript" src="/static/externals/caroufredsel/jquery.carouFredSel.6.2.1.min.js"></script>
<script type="text/javascript">
  $(".featured-properties-1 ").each(function(){
    pagination = $(this).find(".slider-navigation")
    slider = $(this).find(".slider");
    slider.carouFredSel({
      auto: {
        play: true,
        timeoutDuration: Math.floor(Math.random() * 5000) + 4000
      },
      width: '100%',
        items: {
        visible: 1,
        filter: ".home-featured-property"
      },
      infinite: true,
      circular: true,
      scroll: {
        fx: "slide",
        items: 1,
        easing: "linear",
        duration: 500
      },
      pagination: {
        container: pagination,
        anchorBuilder: function(nr) {
          return '<a href="#" class="clicker"></a>';
        }
      }
    });
  });
</script>

// This goes in custom.less
<style type="text/css">
  .featured-properties-1 {
    .property-image-thumb{
      position: relative;
      width: 100%;
      height: 260px;
      overflow: hidden;
    }
    .slider-navigation{
      position: relative;
      display: inline-block;
      text-align: center;
      width: 100%;
      .clicker{
        width: 20px;
        height: 4px;
        display: inline-block;
        margin: 3px;
        background: #d6d6d6;
        &.selected{
          background: @PrimaryColor;
        }
      }
    }
    // If you need circles instead of lines, add the class "circle-nav" to featured-articles-1
    &.circle-nav{
      .slider-navigation{
        .clicker{
          width: 16px;
          height: 16px;
          .border-radius(16px);
        }
      }
    }
  }
</style>
{% endcomment %}
